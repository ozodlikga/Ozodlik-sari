<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <title>FLE-X Savdo (LocalStorage + Email Buyurtma)</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 700px; margin: auto; padding: 1rem; }
    input, textarea, button { display: block; width: 100%; margin-bottom: 10px; padding: 8px; font-size: 1rem; }
    .product { border: 1px solid #ccc; padding: 10px; margin-bottom: 15px; border-radius: 5px; }
    img { max-width: 100%; height: 150px; object-fit: cover; }
    .order-btn { background: #007bff; color: white; border: none; padding: 10px; cursor: pointer; border-radius: 3px; }
    .order-btn:hover { background: #0056b3; }
  </style>
</head>
<body>
  <h1>FLE-X Mahsulotlar</h1>

  <form id="productForm">
    <input type="text" id="name" placeholder="Mahsulot nomi" required />
    <input type="number" id="price" placeholder="Narxi (so‘m)" required />
    <input type="text" id="image" placeholder="Rasm URL" required />
    <textarea id="desc" placeholder="Tavsif"></textarea>
    <button type="submit">Mahsulot qo‘shish</button>
  </form>

  <h2>Mahsulotlar ro‘yxati</h2>
  <div id="products"></div>

  <script>
    const STORAGE_KEY = 'flex_products';
    const YOUR_EMAIL = 'sizningemailingiz@example.com'; // O'zingizning emailingizni shu yerga yozing

    function getProducts() {
      return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    }

    function saveProducts(products) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(products));
    }

    function renderProducts() {
      const products = getProducts();
      const container = document.getElementById('products');
      container.innerHTML = '';
      if (products.length === 0) {
        container.innerHTML = '<p>Hozircha mahsulotlar yo‘q.</p>';
        return;
      }
      products.forEach(p => {
        const mailtoLink = `mailto:${YOUR_EMAIL}?subject=Buyurtma%20${encodeURIComponent(p.name)}&body=Salom,%0D%0AMen%20bu%20mahsulotni%20xohlayman:%0D%0A- Nomi: ${encodeURIComponent(p.name)}%0D%0A- Narxi: ${encodeURIComponent(p.price)} so‘m%0D%0A- Qo‘shimcha ma’lumot:`;
        container.innerHTML += `
          <div class="product">
            <img src="${p.image}" alt="${p.name}" />
            <h3>${p.name}</h3>
            <p><b>Narxi:</b> ${p.price} so‘m</p>
            <p>${p.desc || ''}</p>
            <button class="order-btn" onclick="location.href='${mailtoLink}'">Buyurtma qilish</button>
          </div>
        `;
      });
    }

    document.getElementById('productForm').addEventListener('submit', e => {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const price = document.getElementById('price').value.trim();
      const image = document.getElementById('image').value.trim();
      const desc = document.getElementById('desc').value.trim();

      if (!name || !price || !image) {
        alert('Nom, narx va rasm URL kiriting!');
        return;
      }

      const products = getProducts();
      products.push({ id: Date.now(), name, price, image, desc });
      saveProducts(products);
      renderProducts();

      e.target.reset();
    });

    window.onload = renderProducts;
  </script>
</body>
</html>
